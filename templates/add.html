{% extends "base.html" %}
{% block content %}

<section class="card" style="max-width:980px; margin:0 auto;">
  <div class="card__hd">
    <div class="card__title">新增记录（全字段）</div>
    <div class="card__sub">可新增到：储备库 / 出让库 / 成交库</div>
  </div>
  <div class="card__bd">

    {% if ok %}
      <div style="background:#ecfdf5;border:1px solid #bbf7d0;color:#065f46;padding:10px 12px;border-radius:10px;margin-bottom:14px;">
        ✅ 已成功新增
      </div>
    {% endif %}
    {% if err %}
      <div style="background:#fef2f2;border:1px solid #fecaca;color:#991b1b;padding:10px 12px;border-radius:10px;margin-bottom:14px;">
        ❌ 新增失败（请检查 ID 是否唯一，必填项是否填写）
      </div>
    {% endif %}

    <form method="post" action="/add" class="stack">
      <!-- 目标库 -->
      <div>
        <label class="label">目标库</label>
        <select class="input" name="table" required>
          <option value="reserve">储备库（reserve）</option>
          <option value="offering">出让库（offering）</option>
          <option value="deal">成交库（deal）</option>
        </select>
      </div>

      <!-- 基础必填 -->
      <div style="display:grid; grid-template-columns: 1fr 2fr; gap:16px;">
        <div>
          <label class="label">ID（必须唯一）</label>
          <input class="input" name="id" type="number" required />
        </div>
        <div>
          <label class="label">名称 name</label>
          <input class="input" name="name" required />
        </div>
      </div>

      <!-- 其它字段（与你的表结构一致） -->
      <div style="display:grid; grid-template-columns: repeat(3, 1fr); gap:16px;">
        <div>
          <label class="label">地州 region</label>
          <input class="input" name="region" />
        </div>
        <div>
          <label class="label">矿种 mineral_type</label>
          <input class="input" name="mineral_type" />
        </div>
        <div>
          <label class="label">面积 area (km²)</label>
          <input class="input" name="area" type="number" step="any" />
        </div>

        <div>
          <label class="label">资源量 quantity</label>
          <input class="input" name="quantity" />
        </div>
        <div>
          <label class="label">分类建议 recommendations</label>
          <input class="input" name="recommendations" maxlength="4" />
        </div>
        <div>
          <label class="label">坐标 coordinates</label>
          <input class="input" name="coordinates" />
        </div>

        <div>
          <label class="label">是否满足出让条件 transfer_conditions</label>
          <input class="input" name="transfer_conditions" maxlength="4" placeholder="是/否 或 Y/N" />
        </div>
        <div>
          <label class="label">发布出让公告时间 announcement_date</label>
          <input class="input" name="announcement_date" type="date" />
        </div>
        <div>
          <label class="label">年度出让批次 annual_transfer_batch</label>
          <input class="input" name="annual_transfer_batch" />
        </div>

        <div>
          <label class="label">项目来源 proj_source</label>
          <input class="input" name="proj_source" />
        </div>
        <div>
          <label class="label">起始价 start_price (万元)</label>
          <input class="input" name="start_price" type="number" step="any" />
        </div>
        <div>
          <label class="label">成交日期 transaction_date</label>
          <input class="input" name="transaction_date" type="date" />
        </div>

        <div>
          <label class="label">成交价 transaction_price (万元)</label>
          <input class="input" name="transaction_price" type="number" step="any" />
        </div>
        <div>
          <label class="label">应付金额 payable_price (万元)</label>
          <input class="input" name="payable_price" type="number" step="any" />
        </div>
        <div>
          <label class="label">竞得人 success_bidder</label>
          <input class="input" name="success_bidder" />
        </div>

        <div>
          <label class="label">联系人 contact_name</label>
          <input class="input" name="contact_name" />
        </div>
        <div>
          <label class="label">社会信用代码 social_credit_code</label>
          <input class="input" name="social_credit_code" />
        </div>
        <div>
          <label class="label">联系电话 contact_number</label>
          <input class="input" name="contact_number" />
        </div>

        <div>
          <label class="label">公司地址 company_address</label>
          <input class="input" name="company_address" />
        </div>
        <div>
          <label class="label">出让权限 transfer_authority</label>
          <input class="input" name="transfer_authority" />
        </div>
        <div>
          <label class="label">合同编号 contract_number</label>
          <input class="input" name="contract_number" />
        </div>

        <div>
          <label class="label">合同签订日期 contract_signing_date</label>
          <input class="input" name="contract_signing_date" type="date" />
        </div>
        <div>
          <label class="label">付款截止日期 payment_deadline</label>
          <input class="input" name="payment_deadline" type="date" />
        </div>
        <div>
          <label class="label">实际付款日期 actual_payment_date</label>
          <input class="input" name="actual_payment_date" type="date" />
        </div>
      </div>

      <div style="display:flex; gap:10px; flex-wrap:wrap;">
        <button class="btn" type="submit">新增</button>
        <a class="btn btn--ghost" href="/">返回首页</a>
      </div>
    </form>
  </div>
</section>

{% endblock %}
